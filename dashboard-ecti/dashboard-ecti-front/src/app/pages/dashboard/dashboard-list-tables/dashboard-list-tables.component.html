<div class="dashboard-wrapper">

  <!-- â”€â”€ Contenu principal â”€â”€ -->
  <main class="main-content">

    <!-- Barre de recherche -->
    <div class="search-bar">
      <span class="search-icon">ğŸ”</span>
      <input
        type="text"
        class="input-search"
        placeholder="Rechercher une table..."
        [(ngModel)]="searchText"
        (ngModelChange)="onSearchTextChange()"
      />
    </div>

    <!-- Liste des tables -->
    <h3 class="tables-title">SÃ©lectionnez une table pour afficher un graphique :</h3>
    <div class="tables-list">
      <div
        class="table-item"
        *ngFor="let tbl of filteredTables"
        (click)="onTableClick(tbl)"
        [class.selected]="tbl === currentTable">
        {{ tbl }}
      </div>
      <div class="no-result" *ngIf="filteredTables.length === 0">
        Aucun rÃ©sultat pour Â« {{ searchText }} Â»
      </div>
    </div>

    <!-- Invite si aucune table sÃ©lectionnÃ©e -->
    <div *ngIf="!currentTable && !loading" class="chart-placeholder">
      Veuillez sÃ©lectionner une table pour gÃ©nÃ©rer un graphique.
    </div>

    <!-- Si une table est sÃ©lectionnÃ©e, afficher dâ€™abord le sÃ©lecteur de type -->
    <div *ngIf="currentTable" class="chart-options">
      <label for="typeSelect">Type de graphique :</label>
      <select
        id="typeSelect"
        [(ngModel)]="selectedChartType"
        (change)="onChartTypeChange(selectedChartType)">
        <option *ngFor="let t of chartTypes" [ngValue]="t">{{ t }}</option>
      </select>
    </div>

    <!-- Spinner de chargement -->
    <div *ngIf="loading" class="loading-indicator">
      Chargementâ€¦
    </div>

    <!-- Canvas Chart.js (affichÃ© seulement si la table est sÃ©lectionnÃ©e) -->
    <div *ngIf="currentTable && !loading" class="chart-container">
      <canvas #canvasRef></canvas>
    </div>

  </main>
</div>