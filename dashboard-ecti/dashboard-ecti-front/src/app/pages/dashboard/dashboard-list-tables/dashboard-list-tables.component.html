<div class="dashboard-wrapper">
  <main class="main-content">

    <!-- Recherche -->
    <div class="search-bar">
      üîç<input
        placeholder="Rechercher une table‚Ä¶"
        [(ngModel)]="searchText"
        (ngModelChange)="onSearchTextChange()"
      />
    </div>

    <!-- Liste des tables -->
    <ul class="tables-list">
      <li
        *ngFor="let tbl of filteredTables"
        (click)="onTableClick(tbl)"
        [class.selected]="tbl===currentTable"
      >{{ tbl }}</li>
    </ul>

    <!-- Donn√©es brutes -->
    <section *ngIf="currentTable">
      <h2>Donn√©es brutes : {{ currentTable }}</h2>
      <table class="raw-table" *ngIf="rawData.length">
        <thead>
          <tr><th *ngFor="let c of columns">{{ c }}</th></tr>
        </thead>
        <tbody>
          <tr *ngFor="let row of rawData">
            <td *ngFor="let c of columns">{{ row[c] }}</td>
          </tr>
        </tbody>
      </table>

      <!-- Contr√¥les chart -->
      <div class="chart-controls">
        <button (click)="onShowChart()">Afficher le graphique</button>
        <label *ngIf="showChart">
          Type :
          <select [(ngModel)]="selectedChartType"
                  (change)="onChartTypeChange(selectedChartType)">
            <option *ngFor="let t of chartTypes" [value]="t">{{ t }}</option>
          </select>
        </label>
      </div>

      <!-- Chart.js -->
      <div class="chart-container" *ngIf="showChart">
        <canvas #canvasRef></canvas>
      </div>
    </section>

  </main>
</div>
